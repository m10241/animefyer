<!DOCTYPE html>
<html>
    <head>
        <title> Photo Upload page </title>
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body>
       
        <div class="container p-5 my-5 border">
             <h1> Photo editor </h1>
             <p> Select a photo to upload (only .jpg/.jpeg, max 5MB) </p>
             <form id="uploadForm" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <input type="file" name="photo" id="fileInput" accept="image/*" class="form-control">
                </div>
                <br>
                <button type="submit" class="btn btn-primary"> upload </button>
                

            </form>
           
            <div id="message" class="mt-3"></div>

        </div>
        <script>
            document.getElementById('uploadForm').addEventListener('submit', async function (e) {
                e.preventDefault(); 
                const fileInput = document.getElementById('fileInput');
                const file = fileInput.files[0];
                if (!file) {
                    document.getElementById('message').innerText = "Please select a file first.";
                    return;
                }
        
                const formData = new FormData();
                formData.append('photo', file);
        
                try {
                    const response = await fetch('http://localhost:5000/upload', {
                        method: 'POST',
                        body: formData
                    });
        
                    const result = await response.json();
                    document.getElementById('message').innerText = result.message || 'Upload complete!';
                } catch (err) {
                    document.getElementById('message').innerText = 'Error uploading file.';
                    console.error(err);
                }
            });
        </script>
        
    </body>
</html>
